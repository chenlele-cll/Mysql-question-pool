##  连接器

连接器是 Mysql 服务层的第一个模块，当客户端连接服务端时，就由连接器进行处理。

客户端和服务端连接的三个步骤：

- TCP 三次握手
- 身份验证：若用户名或密码不对，则连接器会抛出一个 `Access denied for user` 的错误
- 权限查询：身份验证通过后，会去查询用户所拥有的权限，后面的权限判断都基于此时查出的权限

因此用户一旦建立连接，即使 `root` 用户修改了用户权限，对已建立的连接也不生效。

建立连接成功后，若长时间没有操作，连接器会自动断开，时间是由 `wait_timeout` 控制的，默认是 8 小时。

连接被断开以后，客户端再次发生请求，会收到 `Lost connection to MySQL server during query` 的错误。

此时想要重新执行查询，需要进行重连。



#### 长连接

长连接指的时连接成功后，客户端有持续的请求，使用的一直是同一个连接。



####  短连接

短连接指的是每次执行完少量的操作后就断开，下次需要查询时再重新建立连接