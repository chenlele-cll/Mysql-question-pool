##  记录锁

记录锁就是对表中的记录加锁，简称行锁。比如：

```sql
Select * from test where id = 1 for update
```

上述 `sql` 语句会在 `id = 1` 的记录上加记录锁，以阻止其他事务的插入、更新和删除



注意点：

-  id 列必须为唯一索引或主键，否则上述语句加的所就会变成临建锁
- 同时查询语句必须为精确匹配，不能为 `>`，`<`，`like` 等，否则也会退化成临建锁



InnoDB 实现了两种类型的行锁：

- 共享锁（S）：多个事务对于同一数据可以共享一把锁，不同的事务都能访问到数据，但是只读不能修改，即不允许其他事务获得改行的排他锁
- 排他锁（X）：排他锁不能与其他锁并存。有一个事务获取了一行数据的排他锁，其他事务就不能再获取该行的锁（共享锁、排他锁），只有当前事务可以对该行进行读取和修改。